using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ghost_controller : MonoBehaviour
{

    private SpriteRenderer renderer;
    private Animator animation;
    private Transform transform;

    public GameObject player;

    private void Awake() {
        renderer = GetComponent<SpriteRenderer>();
        animation = GetComponent<Animator>();
        transform = GetComponent<Transform>();

        body.freezeRotation = true; 
        chicken = true;

        //renderer.sprite = new_sprite;

/*         Physics2D.IgnoreCollision(GameObject.FindWithTag("player_2").GetComponent<Collider2D>(), player_box);

        Physics2D.IgnoreCollision(GameObject.FindWithTag("player_1").GetComponent<Collider2D>(), player_box);
 */
    }

    // Start is called before the first frame update
    void Start()
    {
    }

    // Update is called once per frame
    void Update()
    {

        speed = player.GetComponent<Rigidbody2D>().velocity.x;
        max_speed = player.max_speed;
        acceleration = player.acceleration;

        if ((Input.GetKey("3") && player.tag == "player_1") || (Input.GetKey("0") && player.tag == "player_2")) {
            animation.SetTrigger("fox");
            transform.localScale = new Vector3(2.2f, 2.2f, 2.2f);
            player_box.size = new Vector2(0.42f, 0.3f);
            
        }
        else if ((Input.GetKey("2") && player.tag == "player_1") || (Input.GetKey("9") && player.tag == "player_2")) {
            animation.SetTrigger("rabbit");
            transform.localScale = new Vector3(2.149f, 2.149f, 2.149f);
            player_box.size = new Vector2(0.28f, 0.24f);
        }
        else if ((Input.GetKey("1") && player.tag == "player_1") || (Input.GetKey("8") && player.tag == "player_2")) {
            animation.SetTrigger("chicken");
            transform.localScale = new Vector3(1.5395f, 1.607f, 1);
            player_box.size = new Vector2(0.45f, 0.42f);
        }

        if (player.tag == "player_1" && (Input.GetKey("a") || Input.GetKey("d"))) {
            player_input = Input.GetAxis("Horizontal");
        }
        else if (player.tag == "player_2" && (Input.GetKey("left") || Input.GetKey("right"))) {
            player_input = Input.GetAxis("Horizontal");
        }
        else {
            player_input = 0;
        }

        if (player_input > 0) {
            renderer.flipX = true;
        }
        else if (player_input < 0) {
            renderer.flipX = false;
        }
        
        if (player_input != 0 && speed < max_speed) {
            speed += acceleration;
            animation.SetBool("walk", true);
        }
        else if (player_input == 0) {
            if (speed > initial_speed + acceleration) {
                speed -= acceleration;
            }
            animation.SetBool("walk_faster", false);
            animation.SetBool("walk", false);
        }
        else if (speed > max_speed) {
            animation.SetBool("walk_faster", true); 
        }

        transform.position = player.transform.position;
        
    }
}